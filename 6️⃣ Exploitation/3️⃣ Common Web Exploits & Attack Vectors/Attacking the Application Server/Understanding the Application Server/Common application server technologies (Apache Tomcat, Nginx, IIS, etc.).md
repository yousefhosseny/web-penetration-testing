
### **1. Apache Tomcat**
#### **شرح عملي:**
ال Apache Tomcat هو خادوم تطبيقات مفتوح المصدر مكتوب بلغة Java، بيستخدم أساساً لتشغيل تطبيقات الـ Java Servlets و JSP (JavaServer Pages). بمعنى أنه بيفهم الكود اللي مكتوب بـ Java ويحوله لصفحات ويب ديناميكية.

- **استخدامه:** بتشغل عليه تطبيقات Java EE (Enterprise Edition) زي مواقع الشركات الكبيرة.
- **الملفات:** التطبيق بيكون عادةً على شكل ملف WAR (Web Application Archive) بتحطه في مجلد `webapps`.

#### **كود عملي (Servlet بسيط):**
1. كود Java لـ Servlet:
```java
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class HelloServlet extends HttpServlet {
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        out.println("<h1>مرحباً من Tomcat!</h1>");
    }
}
```
2. ملف `web.xml` للتهيئة:
```xml
<web-app>
    <servlet>
        <servlet-name>HelloServlet</servlet-name>
        <servlet-class>HelloServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>HelloServlet</servlet-name>
        <url-pattern>/hello</url-pattern>
    </servlet-mapping>
</web-app>
```
3. تشغيل Tomcat:
- تحمل Tomcat من موقعه الرسمي، تفك الضغط، وتدخل مجلد `bin` وتشغل `startup.sh` (لينكس/ماك) أو `startup.bat` (ويندوز).
- افتح المتصفح على `http://localhost:8080/yourapp/hello` وهتشوف الرسالة.

#### **خلاصة Pentest بالعامية:**
"لو لقيت موقع شغال على Tomcat، جرب تدور على الصفحة الافتراضية `/manager/html` أو `/admin`، لو الadmin نسي يقفلها أو حط باسورد ضعيف، هتقدر تدخل تسيطر على السيرفر! أو جرب تحمل ملف WAR ملغم (Trojan) لو سمحلك برفع ملفات."

---

### **2. Nginx**
#### **شرح عملي:**
الNginx مش خادوم تطبيقات بالمعنى التقليدي زي Tomcat، لكنه بيستخدم كـ Reverse Proxy أو Web Server قوي جدًا بيوزع الطلبات لخادومات التطبيقات التانية (زي Flask أو Node.js). بيتميز بسرعته وقدرته على تحمل طلبات كتير.

- **استخدامه:** بيخدم صفحات ثابتة (HTML، CSS) أو يمرر الطلبات لخادوم تطبيقات زي Gunicorn (لـ Python).
- **الملفات:** ملف التهيئة بتاعه بيكون في `/etc/nginx/nginx.conf`.

#### **كود عملي (تهيئة Nginx):**
1. ملف تهيئة بسيط:
```
server {
    listen 80;
    server_name example.com;

    location / {
        root /var/www/html; # مكان الصفحات الثابتة
        index index.html;
    }

    location /app {
        proxy_pass http://localhost:5000; # يمرر الطلب لتطبيق على بورت 5000
        proxy_set_header Host $host;
    }
}
```
2. تشغيل Nginx:
- تثبته بـ `sudo apt install nginx` (على لينكس مثلاً).
- تعمل `sudo nginx -t` للتأكد من التهيئة، ثم `sudo systemctl restart nginx` لتشغيله.
- لو فتحت `example.com/app` هيمرر الطلب للتطبيق.

#### **خلاصة Pentest بالعامية:**
"لو Nginx مهيأ غلط، جرب تشوف لو بيفضح ملفات حساسة زي `/etc/nginx/nginx.conf` عن طريق مسارات غلط زي `../`. أو لو بيمرر طلبات من غير فحص، جرب تبعتله طلبات غريبة تشوف بيروح فين!"

---

### **3. Microsoft IIS (Internet Information Services)**
#### **شرح عملي:**
ال IIS هو خادوم تطبيقات من مايكروسوفت، بيشتغل على ويندوز ومصمم لتطبيقات ASP.NET أو مواقع ويب بسيطة. بيستخدم لغات زي C# ويدير الطلبات بطريقة متكاملة مع نظام ويندوز.

- **استخدامه:** بتشغل عليه مواقع مبرمجة بـ .NET أو صفحات HTML ثابتة.
- **الإدارة:** بتديره من واجهة رسومية في ويندوز (IIS Manager).

#### **كود عملي (ASP.NET صفحة بسيطة):**
1. ملف `Default.aspx`:
```html
<%@ Page Language="C#" %>
<!DOCTYPE html>
<html>
<body>
    <h1>مرحباً من IIS!</h1>
    <% Response.Write("الوقت دلوقتي: " + DateTime.Now.ToString()); %>
</body>
</html>
```
2. تشغيل IIS:
- تفعل IIS من `Turn Windows features on or off` في ويندوز.
- تحط الملف في مجلد الـ Web Root (غالبًا `C:\inetpub\wwwroot`) وتفتح `http://localhost/Default.aspx`.

#### **خلاصة Pentest بالعامية:**
"لو IIS قديم أو مش معمول له تحديث، جرب تستغل ثغرات زي MS17-010 (EternalBlue) لو السيرفر مفتوح على الشبكة. أو جرب تدور على ملفات حساسة زي `web.config` لو السيرفر بيفضح مسارات!"

---

### **مقارنة سريعة:**
| الخادوم       | اللغة/الاستخدام الأساسي       | المميزات                   |
|----------------|--------------------------------|----------------------------|
| Apache Tomcat | Java (Servlets/JSP)           | قوي لتطبيقات Java         |
| Nginx         | Proxy/Static Content          | سريع وخفيف للطلبات الكتير |
| IIS           | ASP.NET (C#)                  | مدمج مع ويندوز            |

---

### **سيناريوهات الاستغلال الممكنة (Exploitation Scenarios):**
1. **Apache Tomcat:**
   - **Manager Access:** لو الـ `/manager/html` مفتوح وباسورد ضعيف (الافتراضي admin/admin)، تقدر تدخل ترفع ملف WAR خبيث.
   - **Old Versions:** لو Tomcat قديم (زي 7.x)، فيه ثغرات زي CVE-2017-12617 تسمح بتنفيذ كود عن بعد (RCE).

2. **Nginx:**
   - **Misconfiguration:** لو الـ `location` مش محدد كويس، ممكن توصل لملفات زي `/etc/passwd` باستخدام `../`.
   - **Buffer Overflow:** لو النسخة قديمة، جرب ثغرات زي CVE-2013-2028 عشان تكراش السيرفر أو تنفذ كود.

3. **IIS:**
   - **File Exposure:** لو بيفضح ملفات زي `web.config`، ممكن تلاقي فيه بيانات حساسة زي كلمات سر مشفرة.
   - **RCE:** لو معمول Patch قديم، ثغرات زي MS15-034 تسمح بتنفيذ كود عن طريق طلب HTTP غلط.

4. **عامة (لكل الخوادم):**
   - **Default Credentials:** جرب باسوردات افتراضية (admin/admin، root/root).
   - **Directory Traversal:** استخدم `../../` عشان توصل لملفات خارج الـ Web Root.
   - **DoS:** ابعت طلبات كتير أوي (زي بـ Flood Attack) تشوف الخادوم بيستحمل ولا بيقع.

---

لو عايز تفاصيل أكتر عن أي خادوم أو استغلال معين (زي كود لـ Exploit)، قوللي وأنا أفصلك!