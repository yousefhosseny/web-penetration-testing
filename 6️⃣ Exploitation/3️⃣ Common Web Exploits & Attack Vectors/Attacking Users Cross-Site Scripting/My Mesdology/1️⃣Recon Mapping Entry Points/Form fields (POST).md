لاستخراج **POST Body Fields** (حقول البيانات المرسلة في طلبات POST، مثل حقول النماذج أو بيانات JSON في طلبات API)، هناك طرق يدوية وتلقائية تعتمد على أدوات وتقنيات مختلفة. الهدف هو تحديد كل الحقول التي يمكن للمستخدم إدخال بيانات فيها عبر طلبات POST (مثل `username=john&password=123` أو `{"user":"john"}`). هشرح كل الطرق بالتفصيل مع التركيز على الطرق الأكثر كفاءة بناءً على طلبك السابق لدمج الأدوات (مثل Burp Suite، Katana، ParamSpider، وhttpx)، وهضيف أي أدوات إضافية ممكن تساعد في اكتشاف POST Body Fields.

---

### **الطرق اليدوية لاستخراج POST Body Fields**

#### **1. التصفح اليدوي للتطبيق**
- **الوصف**: التفاعل مع الموقع يدويًا لاكتشاف النماذج (Forms) أو نقاط إدخال البيانات.
- **الخطوات**:
  1. افتحي المتصفح وزري الموقع المستهدف (مثل `example.com`).
  2. ابحثي عن النماذج (مثل تسجيل الدخول، البحث، أو نماذج التسجيل).
     - مثال: نموذج تسجيل دخول قد يحتوي على حقول `username` و`password`.
  3. افتحي **DevTools** (F12) → تبويبة **Network**.
  4. فعّلي **Preserve log** واملي النموذج واضغطي **Submit**.
  5. ابحثي عن طلب POST في تبويبة **Network**:
     - اضغطي على الطلب → تبويبة **Params** أو **Payload** → هتشوفي الحقول (مثل `username=john&password=123`).
  6. سجّلي أسماء الحقول (مثل `username`, `password`) وقيمها.
- **المميزات**: بسيط ولا يحتاج أدوات خارجية.
- **العيوب**: بطيء، قد يفوتك حقول مخفية أو طلبات API.

##### الشرح العملي :  نفس الشرح الاتي بس بشوف طلبات ال POST بس 
![2025-06-25 10-01-37.mkv](attachments/2025-06-25 10-01-37.mkv)

#### **2. تحليل ملفات HTML وJavaScript**
- **الوصف**: فحص شيفرة HTML وJavaScript لاكتشاف النماذج وحقولها.
- **الخطوات**:
  1. افتحي **DevTools** → تبويبة **Elements**.
  2. ابحثي عن وسم `<form>` في HTML:
     - ابحثي عن `<input>`, `<textarea>`, أو `<select>` داخل الـ `<form>`.
     - سجّلي قيم السمة `name` (مثل `<input name="username">` → حقل `username`).
  3. ابحثي عن طلبات POST في JavaScript:
     - في تبويبة **Sources**، افتحي ملفات JS.
     - ابحثي عن دوال زي `fetch` أو `XMLHttpRequest` اللي بترسل طلبات POST.
     - افحصي البيانات المرسلة (مثل `{"user":"john"}`).
  4. سجّلي الحقول (مثل `user`, `token`).
- **المميزات**: بيكشف الحقول المخفية (مثل `<input type="hidden">`).
- **العيوب**: يدوي ويتطلب وقت ومهارة تحليل الشيفرة.
##### الشرح العملي :  نفس الشرح الاتي بس  ببحث داخل الملفات او الصفحات عن كلمات مختلفه
![2025-06-25 10-25-56.mkv](attachments/2025-06-25 10-25-56.mkv)

#### **3. اعتراض الطلبات باستخدام DevTools**
- **الوصف**: استخدام DevTools لاعتراض طلبات POST وعرض الحقول.
- **الخطوات**:
  1. افتحي **DevTools** (F12) → تبويبة **Network**.
  2. فعّلي **Preserve log**.
  3. تفاعلي مع الموقع (مثل ملء نموذج أو إرسال طلب API).
  4. ابحثي عن طلبات POST في قائمة الطلبات.
  5. اضغطي على طلب POST → تبويبة **Payload** أو **Params**:
     - لو النموذج `application/x-www-form-urlencoded`، هتشوفي حقول زي `username=john&password=123`.
     - لو JSON (`application/json`)، هتشوفي بيانات زي `{"user":"john","pass":"123"}`.
  6. سجّلي أسماء الحقول والقيم.
- **المميزات**: دقيق وسهل للنماذج البسيطة.
- **العيوب**: يدوي وقد يفوتك طلبات ديناميكية.
##### الشرح العملي :  نفس الشرح الاتي بس بشوف طلبات ال POST بس 
![2025-06-25 10-15-53.mkv](attachments/2025-06-25 10-15-53.mkv)

---

### **الطرق التلقائية لاستخراج POST Body Fields**

#### **1. استخدام Burp Suite (Crawler + Proxy)**
- **الوصف**: استخدام Burp Suite لاعتراض طلبات POST واكتشاف الحقول تلقائيًا.
- **الخطوات**:
  1. **إعداد Burp Suite**:
     - افتحي Burp Suite Professional.
     - تأكدي إن الـ Proxy مفعّل (`127.0.0.1:8080`) والمتصفح مضبوط ليستخدمه.
     - أضيفي النطاق المستهدف في **Target** → **Scope** (مثل `https://example.com`).
  2. **التصفح اليدوي (اختياري لتغطية أفضل)**:
     - تصفحي الموقع واملي النماذج (مثل تسجيل الدخول أو البحث).
     - Burp هيسجل الطلبات في **Proxy** → **HTTP history**.
  3. **تشغيل الـ Crawler**:
     - روحي لتبويبة **Crawler** → **New Crawl**.
     - اختاري النطاق المضاف في الـ Scope.
     - فعّلي **JavaScript Execution** لو الموقع ديناميكي.
     - ضبطي **Crawl Depth** (مثل 5-10) واضغطي **Start Crawl**.
  4. **استخراج طلبات POST**:
     - بعد الزحف، روحي لتبويبة **Target** → **Site map**.
     - استخدمي الفلتر (في الأعلى) واختاري **POST** لعرض طلبات POST فقط.
     - اضغطي على طلب POST → تبويبة **Request** → قسم **Params**:
       - لو `application/x-www-form-urlencoded`، هتشوفي حقول زي `username`, `password`.
       - لو `application/json`، هتشوفي مفاتيح JSON زي `user`, `token`.
  5. **توثيق**:
     - سجّلي الحقول في جدول (مثل `username`, `password`).
     - لو عايزة تصدير، كليك يمين في **Site map** → **Save selected items**.
- **المميزات**: دقيق، يدعم المواقع الديناميكية، ويعرض الحقول بوضوح.
- **العيوب**: النسخة المجانية محدودة (ما فيهاش Crawler).

#### **2
#### **3. استخدام [[Katana]] 
- **الوصف**: Katana بتزحف الروابط، وhttpx بتفحص الطلبات لاستخراج بيانات POST.
- **الخطوات**:
  1. **تشغيل Katana**:
     ```bash
     katana -u https://example.com -d 5 -o katana_urls.txt
     ```
  
#### **4. استخدام [[arjun]]**
- **الوصف**: أداة متخصصة لاكتشاف معلمات مخفية في طلبات POST.
- **الخطوات**:
  1. ثبتي Arjun:
     ```bash
     pip install arjun
     ```
  2. نفّذي الأمر لفحص رابط POST:
     ```bash
     arjun -u https://example.com/login -m POST -o arjun_output.json
     ```
     - `-m POST`: فحص طلبات POST.
     - `-o arjun_output.json`: حفظ النتايج.
  3. راجعي الملف `arjun_output.json`:
     - هيحتوي على حقول زي `username`, `password`, `csrf_token`.
  4. كرري العملية لكل رابط POST اكتشفتيه من Katana أو httpx.
- **المميزات**: ممتازة لاكتشاف الحقول المخفية.
- **العيوب**: قد تكون بطيئة على المواقع الكبيرة.

#### **5. تحليل Swagger/OpenAPI (لطلبات API)**
- **الوصف**: لو الموقع بيستخدم API، ممكن تكتشفي حقول POST من ملفات Swagger/OpenAPI.
- **الخطوات**:
  1. ابحثي عن ملفات مثل `/swagger.json`, `/api-docs`, أو `/openapi.yaml`:
     - زوري روابط زي `https://example.com/swagger.json` في المتصفح.
  2. لو لقيتي ملف Swagger، افتحيه وابحثي عن endpoints بطريقة POST.
  3. افحصي قسم `requestBody` في الـ JSON لاستخراج الحقول (مثل `user`, `token`).
  4. سجّلي الحقول المكتشفة.
- **المميزات**: فعال لتطبيقات API.
- **العيوب**: يعتمد على وجود وثائق API عامة.

---

### **الخطة المثلى لدمج الطرق**
بناءً على طلبك السابق لدمج الأدوات (Burp Crawler، Katana، ParamSpider، httpx)، إليك خطة مدمجة لاستخراج **POST Body Fields**:

#### **1. إعداد البيئة**
- اضبطي Burp Suite Proxy وثبتي شهادة CA.
- ثبتي Katana، httpx، وArjun:
  ```bash
  go install github.com/projectdiscovery/katana/cmd/katana@latest
  go install github.com/projectdiscovery/httpx/cmd/httpx@latest
  pip install arjun
  ```

#### **2. الزحف باستخدام Burp Crawler**
- **الخطوات**:
  1. أضيفي النطاق في **Target** → **Scope**.
  2. ابدئي الزحف في **Crawler** → **New Crawl** (فعّلي JavaScript Execution).
  3. في **Site map**، استخدمي الفلتر لعرض طلبات **POST** فقط.
  4. افحصي قسم **Params** في كل طلب POST لاستخراج الحقول.
  5. سجّلي الحقول (مثل `username`, `password`).

#### **3. الزحف باستخدام Katana + httpx**
- **الخطوات**:
  1. نفّذي Katana:
     ```bash
     katana -u https://example.com -d 5 -o katana_urls.txt
     ```
  2. فحص الروابط بـ httpx لتحديد الروابط اللي تدعم POST:
     ```bash
     httpx -l katana_urls.txt -mr "POST" -sc -o httpx_post_urls.txt
     ```
  3. استخدمي Burp أو Arjun لفحص هذه الروابط:
     - استوردي `httpx_post_urls.txt` في Burp (**Site map** → **Import**).
     - أرسلي كل رابط لـ **Repeater** وأرسلي طلب POST مع بيانات عشوائية (مثل `test=value`) لمعرفة الحقول المتوقعة.
     - أو استخدمي Arjun:
       ```bash
       arjun -u <رابط_من_httpx_post_urls.txt> -m POST -o arjun_output.json
       ```

#### **4. اكتشاف الحقول المخفية بـ Arjun**
- **الخطوات**:
  1. نفّذي Arjun على الروابط اللي تدعم POST:
     ```bash
     arjun -i httpx_post_urls.txt -m POST -o arjun_output.json
     ```
  2. راجعي `arjun_output.json` لاستخراج الحقول (مثل `csrf_token`, `email`).

#### **5. توثيق النتايج**
- جهزي جدول:
  | **الرابط**                  | **نوع الطلب** | **الحقول**            | **القيم (مثال)** | **اختبارات مقترحة** |
  |-----------------------------|----------------|-----------------------|------------------|---------------------|
  | `example.com/login`         | POST (Form)    | `username`, `password` | `john`, `123`    | SQLi, XSS           |
  | `example.com/api/login`     | POST (JSON)    | `user`, `token`       | `john`, `xyz`    | API Abuse           |
- احفظي مخرجات Burp، Katana، httpx، وArjun كمرجع.

---

### **لماذا دي أفضل الطرق؟**
- **شاملة**: Burp Crawler بيكتشف الحقول من النماذج والـ APIs، وKatana/httpx بيضيفوا روابط إضافية، وArjun بيكتشف الحقول المخفية.
- **فعالة**: httpx بتصفّي الروابط الفعالة، وArjun بيوفر وقت في اكتشاف المعلمات.
- **مرنة**: الجمع بين التحليل اليدوي (Burp) والتلقائي (Katana, httpx, Arjun) بيضمن تغطية كاملة.

---

### **نصائح إضافية**
- **تجنب الحظر**: ضبطي سرعة الزحف في Burp (Throttle) وKatana (`-delay`) وhttpx (`-threads` أقل من 50).
- **اختبار الثغرات**: بعد استخراج الحقول، استخدمي **sqlmap** أو **Burp Intruder** لاختبار XSS، SQLi، إلخ.
- **API**: لو الموقع بيعتمد على APIs، ركزي على Swagger أو استخدمي أدوات زي **Postman** مع Burp لفحص طلبات POST.
- **النطاق القانوني**: تأكدي إنكِ عندك إذن لاختبار الموقع.

---

### **مثال عملي**
لو الموقع `https://example.com`:
1. **Burp Crawler** يكتشف نموذج تسجيل دخول: `POST /login` مع حقول `username`, `password`.
2. **Katana + httpx** يكتشفوا: `POST /api/submit` مع JSON `{"user":"john","token":"xyz"}`.
3. **Arjun** يكتشف حقل مخفي: `csrf_token`.
4. الجدول النهائي:
   | **الرابط**              | **الحقول**                   | **القيم (مثال)** |
   |-------------------------|-----------------------------|------------------|
   | `example.com/login`     | `username`, `password`, `csrf_token` | `john`, `123`, `abc` |
   | `example.com/api/submit` | `user`, `token`             | `john`, `xyz`    |

---

2. **فحص الروابط بـ httpx**:
     - استخدمي httpx لتحديد الروابط اللي بتدعم POST:
       ```bash
       httpx -l katana_urls.txt -mr "POST" -sc -o httpx_post_urls.txt
       ```
       - `-mr "POST"`: تصفية الروابط اللي تدعم طلبات POST.
       - `-sc`: إرجاع رمز الحالة (مثل 200).
  3. **استخراج الحقول**:
     - لأن Katana وhttpx ما بيستخرجوش الحقول مباشرة، استخدمي Burp أو ZAP لاعتراض طلبات POST لهذه الروابط:
       - أرسلي الروابط من `httpx_post_urls.txt` لـ Burp (كليك يمين → **Copy URLs** → استورديها في Burp).
       - في Burp، استخدمي **Repeater** لإرسال طلبات POST يدويًا وتسجيل الحقول.
     - أو استخدمي سكربت Python لمحاكاة طلبات POST:
       ```python
       import requests
       with open('httpx_post_urls.txt', 'r') as file:
           for line in file:
               url = line.strip().split('[')[0].strip()
               try:
                   response = requests.post(url, data={'test':'value'})
                   print(f"URL: {url}\nResponse: {response.text[:200]}")
               except:
                   pass
       ```
       - افحصي استجابة الخادم لتحديد الحقول المتوقعة.
- **المميزات**: سريعة وبتكتشف الروابط اللي تدعم POST.
- **العيوب**: تحتاج تدخل يدوي أو أدوات إضافية لاستخراج الحقول.
